<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Sheraton Niagara Falls - Dashboard</title>
  <style>
    :root { --bg:#0b0f14; --card:#121925; --muted:#9bb0c8; --text:#e8f0fb; --line:#223247; }
    * { box-sizing: border-box; }
    body { margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; background: var(--bg); color: var(--text); }
    .wrap { max-width: 1400px; margin: 0 auto; padding: 16px; }
    .banner { padding:10px 12px; border:1px dashed #3a5d8a; border-radius:12px; color:#bcd3ee; margin-bottom:12px; }
    .card { background: var(--card); border:1px solid var(--line); border-radius: 14px; padding: 14px; }
    .loginBox { max-width: 440px; margin: 16px auto; }
    .loginBox h2 { margin:0 0 10px; font-size: 18px; }
    .small { font-size: 12px; color: var(--muted); }
    label { display:block; font-size: 12px; color: var(--muted); margin: 10px 0 6px; }
    input, button { background:#0f1622; color:var(--text); border:1px solid var(--line); border-radius:10px; padding:10px 12px; font-size:14px; width:100%; }
    button { cursor:pointer; margin-top: 12px; width:auto; }
    .btn-primary { background:#173254; border-color:#2a4d78; }
    .msg { margin-top: 10px; font-size: 13px; color: var(--muted); }
    .err { color:#ff8a8a; }
    .ok { color:#98f5b2; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="banner">
      Local Supabase library mode (loaded from this GitHub repo). If this shows and login works, you’re good.
    </div>

    <div id="bootMsg" class="msg"></div>

    <div id="loginView" class="loginBox card">
      <h2>Sign in</h2>
      <div class="small">Sheraton Niagara Falls Dashboard</div>

      <label>Email</label>
      <input id="email" type="email" placeholder="name@niagarafallshotels.com" />

      <label>Password</label>
      <input id="password" type="password" placeholder="••••••••" />

      <button id="btnLogin" class="btn-primary">Sign in</button>
      <div id="loginMsg" class="msg"></div>
    </div>
  </div>

  <!-- Load Supabase from your own repo (NO CDN) -->
  <script src="./supabase.js"></script>

  <script>
    const SUPABASE_URL = "https://jiarjsvoumbbilfsqftj.supabase.co";
    const SUPABASE_ANON_KEY = "sb_publishable_AB6JsEiTT1V5Bu5ANA0Qmw_yFE8M0NV";

    const bootMsg = document.getElementById("bootMsg");
    const loginMsg = document.getElementById("loginMsg");

    function setMsg(el, text, type="") {
      el.className = "msg " + (type === "err" ? "err" : type === "ok" ? "ok" : "");
      el.textContent = text || "";
    }

    if (!window.supabase || !window.supabase.createClient) {
      setMsg(bootMsg, "Supabase library did not load. Make sure supabase.js is uploaded in the repo root.", "err");
    } else {
      setMsg(bootMsg, "");
    }

    const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    document.getElementById("btnLogin").addEventListener("click", async () => {
      const email = document.getElementById("email").value.trim();
      const password = document.getElementById("password").value;

      if (!email || !password) {
        setMsg(loginMsg, "Enter email and password.", "err");
        return;
      }

      try {
        setMsg(loginMsg, "Signing in…");
        const { data, error } = await supabase.auth.signInWithPassword({ email, password });
        if (error) throw error;

        setMsg(loginMsg, "Login worked. Next we’ll enable the full dashboard view.", "ok");
      } catch (e) {
        setMsg(loginMsg, e.message || String(e), "err");
      }
    });
  </script>
</body>
</html>
